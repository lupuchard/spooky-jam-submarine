[gd_scene load_steps=13 format=3 uid="uid://cp3ypyv3hf2c4"]

[ext_resource type="Script" uid="uid://cvn0cn84nf1em" path="res://Fish/Fish.gd" id="1_b5kut"]
[ext_resource type="AudioStream" uid="uid://fjk6tmtslf1k" path="res://Assets/Sound/blast.mp3" id="2_5rmt7"]
[ext_resource type="Script" uid="uid://djtec0xtr6i10" path="res://Fish/FishBehavior/PufferFishBehavior.gd" id="2_vlf5n"]
[ext_resource type="PackedScene" uid="uid://062s1vnjm4x7" path="res://Fish/Spike.tscn" id="3_nmnhf"]
[ext_resource type="Material" uid="uid://wmfpwdegbfnq" path="res://Scene/IgnoreLight.tres" id="3_vlf5n"]
[ext_resource type="Texture2D" uid="uid://du2r7un3xoykb" path="res://Assets/Fish/Puffer/body.png" id="5_5rmt7"]
[ext_resource type="Texture2D" uid="uid://bc8u7q57a87d0" path="res://Assets/Fish/Puffer/body_puffed.png" id="6_piemc"]
[ext_resource type="AudioStream" uid="uid://danhawnwxmts3" path="res://Assets/Sound/drumroll.mp3" id="7_nmnhf"]
[ext_resource type="Texture2D" uid="uid://5lknsj4scc8e" path="res://Assets/Fish/Puffer/light.png" id="7_piemc"]

[sub_resource type="Resource" id="Resource_nmnhf"]
script = ExtResource("2_vlf5n")
unpuffed_sprite = NodePath("Body/Unpuffed")
puffed_sprite = NodePath("Body/Puffed")
unpuffed_collision = NodePath("CollisionUnpuffed")
puffed_collision = NodePath("CollisionPuffed")
spike_projectile = ExtResource("3_nmnhf")
explosion_sound = ExtResource("2_5rmt7")
metadata/_custom_type_script = "uid://djtec0xtr6i10"

[sub_resource type="CapsuleShape2D" id="CapsuleShape2D_b5kut"]
height = 34.0

[sub_resource type="CapsuleShape2D" id="CapsuleShape2D_5tu2b"]
radius = 17.0
height = 36.0

[node name="Puffer" type="StaticBody2D"]
script = ExtResource("1_b5kut")
fish_type = 10
behavior = SubResource("Resource_nmnhf")
size = 8.0
raycasts_needed = 3
study_speed = 0.5
study_reward_factor = 3.0
metadata/_custom_type_script = "uid://cvn0cn84nf1em"

[node name="Body" type="Node2D" parent="."]

[node name="Unpuffed" type="Sprite2D" parent="Body" groups=["fish_body"]]
position = Vector2(4, -1)
texture = ExtResource("5_5rmt7")

[node name="Light" type="Sprite2D" parent="Body/Unpuffed"]
material = ExtResource("3_vlf5n")
texture = ExtResource("7_piemc")

[node name="Puffed" type="Sprite2D" parent="Body" groups=["fish_body"]]
visible = false
position = Vector2(3, 0)
texture = ExtResource("6_piemc")

[node name="CollisionUnpuffed" type="CollisionShape2D" parent="."]
rotation = 1.5707964
shape = SubResource("CapsuleShape2D_b5kut")

[node name="CollisionPuffed" type="CollisionShape2D" parent="."]
rotation = 1.5707964
shape = SubResource("CapsuleShape2D_5tu2b")
disabled = true

[node name="PrepareSound" type="AudioStreamPlayer2D" parent="."]
stream = ExtResource("7_nmnhf")
volume_db = 10.0
